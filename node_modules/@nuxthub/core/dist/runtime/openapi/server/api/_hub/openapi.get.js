import { eventHandler, createError } from "h3";
import { requireNuxtHubAuthorization } from "../../../../utils/auth.js";
import { useRuntimeConfig } from "#imports";
export default eventHandler(async (event) => {
  await requireNuxtHubAuthorization(event);
  const hub = useRuntimeConfig().hub;
  if (!hub.openapi) {
    throw createError({
      statusCode: 422,
      message: "OpenAPI not configured"
    });
  }
  const openapi = await import("#hub/openapi").then((mod) => mod.default).catch(() => void 0);
  if (typeof openapi !== "function") {
    throw createError({
      statusCode: 404,
      message: "not found"
    });
  }
  return openapi(event);
});
